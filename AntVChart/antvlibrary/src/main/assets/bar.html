<!DOCTYPE html>
 <html>
   <head>
     <meta charset="utf-8">
     <meta name=”viewport” content=”width=device-width, initial-scale=1″ />
     <title>柱状图</title>
     <script src="https://a.alipayobjects.com/g/datavis/g2-mobile-all/2.1.13/index.js"></script>
     <script>
        scaleW = window.innerWidth / 320;
        scaleH = window.innerHeight / 480;
        var resizes = document.querySelectorAll('.resize');
        for (var j = 0; j < resizes.length; j++) {
          resizes[j].style.width = parseInt(resizes[j].style.width) * scaleW + 'px';
          resizes[j].style.height = parseInt(resizes[j].style.height) * scaleH + 'px';
          resizes[j].style.top = parseInt(resizes[j].style.top) * scaleH + 'px';
          resizes[j].style.left = parseInt(resizes[j].style.left) * scaleW + 'px';
        }
        console.log('resize' + window.innerWidth + window.innerHeight);
     </script>
   </head>
   <body>
   <div >
       <canvas class="resize" id="c1"
               style="width:100%; height:100%; margin:0 auto;"></canvas>
   </div>
<script>

var data;

function connectWebViewJavascriptBridge(callback) {
    if (window.WebViewJavascriptBridge) {
        callback(WebViewJavascriptBridge)
    } else {
        document.addEventListener(
            'WebViewJavascriptBridgeReady'
            , function() {
                callback(WebViewJavascriptBridge)
            },
            false
        );
    }
}

connectWebViewJavascriptBridge(function(bridge) {
    bridge.init(function(message, responseCallback) {
        console.log('JS got a message', message);
        var data = {
            'Javascript Responds': '测试中文!'
        };
        console.log('JS responding with', data);
        responseCallback(data);
    });

    bridge.registerHandler("functionInJs", function(datas, responseCallback) {
        <!--document.getElementById("show").innerHTML = ("data from Java: = " + datas);-->

        <!--data = [{"x":"a","y":10},{"x":"b","y":20},{"x":"c","y":30}];-->
        
        data = JSON.parse(datas);

        draw();

        var responseData = "Javascript Says Right back hehe!";
        responseCallback(responseData);
    });
})

function draw() {
  GM.Global.pixelRatio = 2;

  var chart = new GM.Chart({
  id: 'c1'
  });

  chart.source(data, {
   tem: {
       tickCount: 5
   }
  });

  //配置刻度文字大小，供PC端显示用(移动端可以使用默认值20px)
  chart.axis('x', {
   label:{
       fontSize: 14
   },
  grid: null
  });

  chart.axis('y', {
   label:{
       fontSize: 14
   }
  });

  chart.interval().position('x*y').color('x');
  chart.render();
}

</script>
   </body>
 </html>
